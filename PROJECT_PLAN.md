# План проекта: сайт учителя математики на Django

## 1. Цель проекта

Сделать сайт учителя математики с двумя основными разделами:

1. **Раздел теории** (не в приоритете на первом этапе).
2. **Раздел задач и тестов**:
   - хранение задач в базе данных;
   - поддержка математических формул (LaTeX → MathJax);
   - удобный поиск, фильтрация и сортировка;
   - конструктор тестов из набора задач;
   - импорт/экспорт задач (без картинок).

---

## 2. Технологический стек (первый вариант)

### Backend

- Python 3.11+
- Django 5.x
- Django REST Framework (DRF) — для API.
- PostgreSQL — основная база данных.
- Pillow — работа с изображениями.
- python-dotenv — конфигурация через `.env`.

Позже можно добавить:

- Celery + Redis — для фоновых задач (массовый импорт, рассылка).
- drf-spectacular — автодокументация API.

### Frontend

На первом этапе можно обойтись **Django-шаблонами**, потом:

- React + TypeScript.
- Tailwind CSS или Bootstrap.
- MathJax 3 для рендеринга формул.

### Инфраструктура

- Git + GitHub — хранение кода и истории.
- Локальная разработка на своем ПК.
- Для деплоя в будущем: Railway, Render, PythonAnywhere или другой PaaS.

---

## 3. Архитектура данных (основные модели)

### Task (Задача)

- `title` — краткое название.
- `condition` — условие (текст + LaTeX).
- `condition_image` — картинка к условию (опционально).
- `hint` — подсказка (текст, LaTeX, опционально).
- `hint_image` — картинка к подсказке (опционально).
- `solution` — полное решение (текст, LaTeX, опционально).
- `solution_image` — картинка к решению (опционально).
- `difficulty` — уровень сложности (например, 1–10).
- `is_published` — опубликована ли задача.
- `created_by` — кто добавил (пользователь).
- `created_at`, `updated_at` — даты создания/изменения.

Связи:

- `topics` — ManyToMany к TaskTopic.
- `skills` — ManyToMany к TaskSkill.
- `sources` — ManyToMany к TaskSource.

### TaskAnswer (варианты ответов)

- `task` — ForeignKey на Task.
- `answer_text` — текст/формула ответа.
- `is_correct` — правильный ли ответ.
- `explanation` — пояснение (опционально).
- `order` — порядок отображения.

### TaskTopic (темы)

- `name` — название темы (Алгебра, Геометрия…).
- `description` — описание.

### TaskSkill (навыки)

- `name` — название навыка.
- `topic` — ForeignKey на TaskTopic.
- `description` — описание.

### TaskSource (источники)

- `name` — например, «ЕГЭ профиль 2024», «Учебник Мордковича».
- `url` — ссылка (опционально).

---

## 4. Основные функции системы

### На первом этапе (MVP)

- Ввод задач через админку Django.
- Хранение всех полей задачи и вариантов ответов.
- REST API:
  - список задач, просмотр одной задачи;
  - фильтрация по темам, навыкам, сложности;
  - поиск по тексту условия/решения.
- Импорт/экспорт задач в JSON (без картинок).
- Простой интерфейс просмотра списка задач (через шаблоны Django).

### На следующих этапах

- Полноценный конструктор тестов (на React):
  - выбор задач по фильтрам;
  - сохранение наборов задач;
  - возможно — экспорт в PDF.
- Раздел теории (структура тем + страницы теории).
- Личный кабинет ученика (история решений, статистика).
- Роли пользователей (учитель / ученик / администратор).

---

## 5. Примерный план по шагам

### Этап 1. Подготовка (1 неделя)

- Установить всё необходимое ПО (Python, PostgreSQL, Git, редактор).
- Создать репозиторий на GitHub.
- Настроить виртуальное окружение.
- Создать Django-проект и приложение `core`.
- Настроить подключение к PostgreSQL.

### Этап 2. Модели и админка (1 неделя)

- Создать модели: Task, TaskAnswer, TaskTopic, TaskSkill, TaskSource.
- Сделать миграции.
- Настроить админку для удобного ввода задач (inlines для ответов и т.д.).
- Ввести несколько тестовых задач вручную.

### Этап 3. API (1 неделя)

- Настроить Django REST Framework.
- Написать сериализаторы для всех моделей.
- Написать ViewSet’ы и роуты.
- Добавить фильтрацию, поиск и сортировку.
- Проверить API через браузер и через curl/Postman.

### Этап 4. Импорт/экспорт (1 неделя)

- Определить формат JSON для обмена задачами.
- Написать management-команду для импорта.
- Написать management-команду для экспорта.
- Протестировать на нескольких задачах.

### Этап 5. Интерфейс (1–2 недели)

- Сделать простые страницы на Django-шаблонах:
  - список задач;
  - карточка одной задачи;
  - формы для фильтрации.
- Позже — начать переводить функционал на React.

---

## 6. Что ещё учесть

- Валидация размеров и типа загружаемых изображений.
- Ограничение доступа к решениям (ученику не показывать раньше времени).
- Планирование структуры ролей пользователей (минимум — учитель и ученик).
- Ведение истории изменений задач (на будущее).
- Логи ошибок и резервное копирование базы.

---

Этот план можно дополнять по мере того, как проект будет развиваться.
